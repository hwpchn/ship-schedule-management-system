# éƒ¨ç½²æ–‡æ¡£æ€»è§ˆ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›èˆ¹èˆ¶èˆªçº¿ç®¡ç†ç³»ç»Ÿçš„å®Œæ•´éƒ¨ç½²æŒ‡å—ï¼ŒåŒ…æ‹¬ç¯å¢ƒå‡†å¤‡ã€å®‰è£…é…ç½®ã€ç”Ÿäº§éƒ¨ç½²ç­‰å†…å®¹ã€‚

## ğŸ¯ éƒ¨ç½²æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯åº”ç”¨      â”‚    â”‚   è´Ÿè½½å‡è¡¡å™¨    â”‚    â”‚   WebæœåŠ¡å™¨     â”‚
â”‚   (React/Vue)   â”‚â—„â”€â”€â–ºâ”‚   (Nginx)       â”‚â—„â”€â”€â–ºâ”‚   (Django)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
                       â”‚   ç¼“å­˜æœåŠ¡      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                       â”‚   (Redis)       â”‚             â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
                                                        â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
                       â”‚   æ•°æ®åº“        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚   (MySQL)       â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç¯å¢ƒè¦æ±‚

#### æœ€ä½é…ç½®
- **CPU**: 2æ ¸å¿ƒ
- **å†…å­˜**: 4GB RAM
- **å­˜å‚¨**: 50GB SSD
- **ç½‘ç»œ**: 10Mbpså¸¦å®½

#### æ¨èé…ç½®
- **CPU**: 4æ ¸å¿ƒ
- **å†…å­˜**: 8GB RAM
- **å­˜å‚¨**: 100GB SSD
- **ç½‘ç»œ**: 100Mbpså¸¦å®½

#### ç”Ÿäº§ç¯å¢ƒé…ç½®
- **CPU**: 8æ ¸å¿ƒ
- **å†…å­˜**: 16GB RAM
- **å­˜å‚¨**: 200GB SSD
- **ç½‘ç»œ**: 1Gbpså¸¦å®½

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **Python**: 3.8+
- **Django**: 4.2.7
- **Django REST Framework**: 3.14.0
- **MySQL**: 8.0+
- **Redis**: 6.0+

### å‰ç«¯æŠ€æœ¯
- **Node.js**: 16.0+
- **React/Vue**: æœ€æ–°ç¨³å®šç‰ˆ
- **Nginx**: 1.20+

### éƒ¨ç½²å·¥å…·
- **Docker**: 20.0+
- **Docker Compose**: 2.0+
- **Git**: 2.30+

## ğŸ“š éƒ¨ç½²æ–¹å¼

### 1. å¼€å‘ç¯å¢ƒéƒ¨ç½²
é€‚ç”¨äºæœ¬åœ°å¼€å‘å’Œæµ‹è¯•ï¼š
- ç›´æ¥è¿è¡ŒDjangoå¼€å‘æœåŠ¡å™¨
- ä½¿ç”¨SQLiteæ•°æ®åº“
- æ— éœ€è´Ÿè½½å‡è¡¡å’Œç¼“å­˜

**è¯¦ç»†æŒ‡å—**: [å®‰è£…æŒ‡å—](installation.md)

### 2. æµ‹è¯•ç¯å¢ƒéƒ¨ç½²
é€‚ç”¨äºåŠŸèƒ½æµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼š
- ä½¿ç”¨Dockerå®¹å™¨åŒ–éƒ¨ç½²
- MySQLæ•°æ®åº“
- Redisç¼“å­˜
- ç®€åŒ–çš„Nginxé…ç½®

### 3. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
é€‚ç”¨äºæ­£å¼ç”Ÿäº§ç¯å¢ƒï¼š
- å®Œæ•´çš„å®¹å™¨åŒ–éƒ¨ç½²
- é«˜å¯ç”¨æ•°æ®åº“é…ç½®
- è´Ÿè½½å‡è¡¡å’Œåå‘ä»£ç†
- ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
- SSLè¯ä¹¦é…ç½®

## ğŸ”§ éƒ¨ç½²æµç¨‹

### æ ‡å‡†éƒ¨ç½²æµç¨‹
```
1. ç¯å¢ƒå‡†å¤‡ â†’ 2. ä»£ç éƒ¨ç½² â†’ 3. ä¾èµ–å®‰è£… â†’ 4. æ•°æ®åº“é…ç½® â†’ 5. æœåŠ¡å¯åŠ¨
```

### è¯¦ç»†æ­¥éª¤
1. **ç¯å¢ƒå‡†å¤‡**
   - æœåŠ¡å™¨é…ç½®
   - è½¯ä»¶å®‰è£…
   - ç½‘ç»œé…ç½®

2. **ä»£ç éƒ¨ç½²**
   - ä»£ç ä¸‹è½½
   - ç‰ˆæœ¬æ§åˆ¶
   - æ–‡ä»¶æƒé™è®¾ç½®

3. **ä¾èµ–å®‰è£…**
   - Pythonä¾èµ–
   - ç³»ç»Ÿä¾èµ–
   - å‰ç«¯ä¾èµ–

4. **æ•°æ®åº“é…ç½®**
   - æ•°æ®åº“åˆ›å»º
   - ç”¨æˆ·æƒé™è®¾ç½®
   - æ•°æ®è¿ç§»

5. **æœåŠ¡å¯åŠ¨**
   - åç«¯æœåŠ¡å¯åŠ¨
   - å‰ç«¯æœåŠ¡å¯åŠ¨
   - åå‘ä»£ç†é…ç½®

## ğŸ³ Dockeréƒ¨ç½²

### Docker Composeé…ç½®
```yaml
version: '3.8'

services:
  web:
    build: .
    ports:
      - "8000:8000"
    environment:
      - DEBUG=False
      - DATABASE_URL=mysql://user:pass@db:3306/ship_schedule
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - db
      - redis
    volumes:
      - ./logs:/app/logs
      - ./media:/app/media

  db:
    image: mysql:8.0
    environment:
      - MYSQL_DATABASE=ship_schedule
      - MYSQL_USER=ship_user
      - MYSQL_PASSWORD=ship_password
      - MYSQL_ROOT_PASSWORD=root_password
    volumes:
      - mysql_data:/var/lib/mysql
    ports:
      - "3306:3306"

  redis:
    image: redis:6.0-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - web

volumes:
  mysql_data:
  redis_data:
```

### Dockerfile
```dockerfile
FROM python:3.9-slim

WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    gcc \
    default-libmysqlclient-dev \
    pkg-config \
    && rm -rf /var/lib/apt/lists/*

# å®‰è£…Pythonä¾èµ–
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æ”¶é›†é™æ€æ–‡ä»¶
RUN python manage.py collectstatic --noinput

# æš´éœ²ç«¯å£
EXPOSE 8000

# å¯åŠ¨å‘½ä»¤
CMD ["gunicorn", "--bind", "0.0.0.0:8000", "ship_schedule.wsgi:application"]
```

## ğŸ”’ å®‰å…¨é…ç½®

### SSLè¯ä¹¦é…ç½®
```nginx
server {
    listen 443 ssl http2;
    server_name your-domain.com;

    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;
    
    location / {
        proxy_pass http://web:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### é˜²ç«å¢™é…ç½®
```bash
# å¼€æ”¾å¿…è¦ç«¯å£
ufw allow 22/tcp    # SSH
ufw allow 80/tcp    # HTTP
ufw allow 443/tcp   # HTTPS

# å…³é—­ä¸å¿…è¦ç«¯å£
ufw deny 3306/tcp   # MySQL (ä»…å†…éƒ¨è®¿é—®)
ufw deny 6379/tcp   # Redis (ä»…å†…éƒ¨è®¿é—®)

# å¯ç”¨é˜²ç«å¢™
ufw enable
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—é…ç½®
```python
# settings.py
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'verbose': {
            'format': '{levelname} {asctime} {module} {process:d} {thread:d} {message}',
            'style': '{',
        },
    },
    'handlers': {
        'file': {
            'level': 'INFO',
            'class': 'logging.handlers.RotatingFileHandler',
            'filename': '/app/logs/django.log',
            'maxBytes': 1024*1024*15,  # 15MB
            'backupCount': 10,
            'formatter': 'verbose',
        },
    },
    'root': {
        'handlers': ['file'],
        'level': 'INFO',
    },
}
```

### ç›‘æ§æŒ‡æ ‡
- **ç³»ç»ŸæŒ‡æ ‡**: CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡
- **åº”ç”¨æŒ‡æ ‡**: å“åº”æ—¶é—´ã€é”™è¯¯ç‡ã€ååé‡
- **æ•°æ®åº“æŒ‡æ ‡**: è¿æ¥æ•°ã€æŸ¥è¯¢æ€§èƒ½ã€é”ç­‰å¾…
- **ç¼“å­˜æŒ‡æ ‡**: å‘½ä¸­ç‡ã€å†…å­˜ä½¿ç”¨ã€è¿æ¥æ•°

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åº“ä¼˜åŒ–
```sql
-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_vessel_schedule_pol_pod ON vessel_schedule(polCd, podCd);
CREATE INDEX idx_vessel_schedule_version ON vessel_schedule(data_version);
CREATE INDEX idx_vessel_info_carrier ON vessel_info_from_company(carriercd);

-- é…ç½®ä¼˜åŒ–
SET innodb_buffer_pool_size = 2G;
SET query_cache_size = 256M;
SET max_connections = 200;
```

### ç¼“å­˜é…ç½®
```python
# Redisç¼“å­˜é…ç½®
CACHES = {
    'default': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': 'redis://redis:6379/0',
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
            'CONNECTION_POOL_KWARGS': {
                'max_connections': 50,
                'retry_on_timeout': True,
            }
        },
        'KEY_PREFIX': 'ship_schedule',
        'TIMEOUT': 300,  # 5åˆ†é’Ÿé»˜è®¤è¿‡æœŸ
    }
}
```

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰æ£€æŸ¥
- [ ] æœåŠ¡å™¨èµ„æºå……è¶³
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸
- [ ] åŸŸåè§£æé…ç½®
- [ ] SSLè¯ä¹¦å‡†å¤‡
- [ ] æ•°æ®åº“å¤‡ä»½

### éƒ¨ç½²åæ£€æŸ¥
- [ ] æœåŠ¡æ­£å¸¸å¯åŠ¨
- [ ] APIæ¥å£å¯è®¿é—®
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] ç¼“å­˜æœåŠ¡æ­£å¸¸
- [ ] æ—¥å¿—è®°å½•æ­£å¸¸
- [ ] ç›‘æ§æŒ‡æ ‡æ­£å¸¸

### åŠŸèƒ½æµ‹è¯•
- [ ] ç”¨æˆ·ç™»å½•åŠŸèƒ½
- [ ] èˆ¹æœŸæŸ¥è¯¢åŠŸèƒ½
- [ ] æ•°æ®ç®¡ç†åŠŸèƒ½
- [ ] æƒé™æ§åˆ¶åŠŸèƒ½
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡

## ğŸ”— ç›¸å…³é“¾æ¥

- **[å®‰è£…æŒ‡å—](installation.md)** - è¯¦ç»†å®‰è£…æ­¥éª¤
- **[é…ç½®è¯´æ˜](configuration.md)** - ç³»ç»Ÿé…ç½®å‚æ•°
- **[APIæ–‡æ¡£](../api/README.md)** - APIæ¥å£æ–‡æ¡£
- **[å¼€å‘æŒ‡å—](../development/README.md)** - å¼€å‘ç¯å¢ƒæ­å»º

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ç›¸å…³æ–‡æ¡£å’ŒFAQ
2. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶è·å–é”™è¯¯ä¿¡æ¯
3. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ
4. æäº¤Issueåˆ°é¡¹ç›®ä»“åº“

**æŠ€æœ¯æ”¯æŒé‚®ç®±**: support@example.com  
**é¡¹ç›®ä»“åº“**: https://github.com/your-org/ship-schedule
